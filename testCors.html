<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript">

		function lgn() {
		  return new Promise(function(resolve, reject) {
		    var xhr = new XMLHttpRequest();
			var params = {
		      grant_type: "password",
		      client_id : "3MVG9HxRZv05HarRDCbMSbu0DqH.M_BA873rS54Uikz4KduKL01ag1GBMYK5UMf2.vflb4G3kmUSn244Iqdv0",
		      client_secret : "6655933965399586796",
		      username:"julenrcosta@dev.com",
		      password:"JrC&7012I4EdzNLjB4dpxbtek10V9baGL"};
			xhr.open("POST", 'https://julen-dev-ed.my.salesforce.com/services/oauth2/token?grant_type=password&client_id=3MVG9HxRZv05HarRDCbMSbu0DqH.M_BA873rS54Uikz4KduKL01ag1GBMYK5UMf2.vflb4G3kmUSn244Iqdv0&client_secret=6655933965399586796&username=julenrcosta@dev.com&password=JrC%267012I4EdzNLjB4dpxbtek10V9baGL', true);
			xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

			xhr.onreadystatechange = function() { 
			    if (this.status === 200 && this.readyState == 4) {
			        console.log(this.response)
			        resolve(this.response)
			    }
			}
			xhr.send();
		  });
		}

		function login() {
			var lg = lgn().then((res) => {
				console.log(res)
			});
		}
		
		function apisetAccount() {
			var responseLogin = lgn().then((res) => {
				 	
				 	var parsedresponse = JSON.parse(res);
				  	var http = new XMLHttpRequest()
					var params2 = {"Name":"Test"}
			        http.open('POST', 'https://julen-dev-ed.my.salesforce.com/services/data/v49.0/sobjects/account/')
			        http.setRequestHeader('Content-type', 'application/json')
					http.setRequestHeader('Authorization', 'Bearer ' + parsedresponse.access_token)
					http.setRequestHeader('Cross-Origin', 'true')
			        http.send(JSON.stringify(params2))
			        http.onreadystatechange = function() {
			            if (this.status === 201 && this.readyState == 4) {
					        console.log(this.response)
					        
					    }
			        }
				});
		}
		function apisetAccountBearer() {
				 	
				  	var http = new XMLHttpRequest()
					var params2 = {"Name":"Test"}
			        http.open('POST', 'https://julen-dev-ed.my.salesforce.com/services/data/v49.0/sobjects/account/')
			        http.setRequestHeader('Content-type', 'application/json')
					http.setRequestHeader('Authorization', 'Bearer 00D0Y0000034UPd!AQYAQIeaIrFEx77qH2uhFArEKo4XLhE1TqP8YcSqQ9Ydy3z_lIJbnKEoPcBiDzYHrQl_x_NwCjcuiJ6dqQU7WbhVAk_37jzu')
					http.setRequestHeader('Cross-Origin', 'true')
			        http.send(JSON.stringify(params2))
			        http.onreadystatechange = function() {
			            if (this.status === 201 && this.readyState == 4) {
					        console.log(this.response)
					        
					    }
			        }
		}

		function bankiaapisetAccountBearer() {
			var params = {
"Buzon":"TestJulen@prueba",
"Asunto":"AsuntoTestJulen",
"visitorID":"TestvisitorID",
"nombre":"TestJulen9001CORS",
"client1Lastname1":"ApellidoJulen1Test1",
"client1Lastname2":"ApellidoJulen1Test2",
"telefono":"555555555",
"email":"TestemailJulen@prueba.com",
"importe":"10",
"cretive_id":"TestCreative_id",
"dni":"77778892Z",
"userAgent":"",
"site_id":"TestSite_id",
"clickref":"TestClickref",
"origin":"Leads Digitales",
"condiciones":"TestCondiciones", 
"escliente":"",
"site_name":"Testsite_name",
"campaign":"TestCampaign", 
"comunicaciones":"true",
"accountUrsus":"1239999992",
"leadForm":"Leads_Digitales",
"familyLead":"Banca a Distancia - Empresas",
"walmericId":"4452a81f736b359c677fa2c8f5fb94996a99bb78",
"creationDate":"", 
"partnerExpNumber":"", 
"partnerManager":"",
"officeCode":"",
"client1Phone2":"",
"client1BirthDate":"1970-01-02",
"client1CivilStatus":"",
"client1MunicipalityCode":"",
"client1MunicipalityDescription":"",
"client1ProvinceCode":"",
"client1ProvinceDescription":"",
"buyingPrice":"",
"loanAmount":"",
"operationType":"",
"propertyUse":"",
"postalCode":"",
"savings":"",
"ltvAppraisal":"",
"ltvBuy":"",
"interestType":"",
"totalIncomes":"",
"loanTerm":"",
"indebtedness":"",
"monthlyQuota":"",
"municipalityCode":"",
"municipalityDescription":"",
"provinceCode":"",
"provinceDescription":"",
"nameGarantia":"",
"typeGarantia":"",
"use":"",
"houseType":"",
"holderGarantia":"",
"city":"",
"estimatedCost":"",
"appraisalValue":"",
"nameDeuda":"",
"typeDeuda":"",
"currentBalance":"",
"situation":"",
"quota":"",
"holderDeuda":"",
"entity":"",
"indirectRisk":"",
"openingDate":"",
"contactNumber":"",
"monhlyIncome":"",
"paymentNumber":"",
"contractType":""
}
				 	
				  	var http = new XMLHttpRequest()
					var params2 = {"Name":"Test"}
			        http.open('POST', 'https://bankia--ventasdig.my.salesforce.com/services/apexrest/LeadsDigitales/')
			        http.setRequestHeader('Content-type', 'application/json')
					http.setRequestHeader('Authorization', 'Bearer 00D3G0000008aMZ!AR4AQHZeAXEHxLru1u.1JSKtWTf9YHPhUldmh1buiSpe2wvi2Fhi912bQ9LYc0Sa155Dqz2EZBs_6bgVRRK.gBTZocHE1PFI')
					http.setRequestHeader('Cross-Origin', 'true')
			        http.send(JSON.stringify(params2))
			        http.onreadystatechange = function() {
			            if (this.status === 201 && this.readyState == 4) {
					        console.log(this.response)
					        
					    }
			        }
		}
	</script>
</head>
<body>
	<button onclick="login()">TestCorsLogin</button>
	<button onclick="apisetAccount()">TestCorsInsertAccount</button>
	<button onclick="apisetAccountBearer()">TestCorsInsertAccountBearer</button>
	<button onclick="bankiaapisetAccountBearer()">bankiaapisetAccountBearer</button>
</body>
</html>
