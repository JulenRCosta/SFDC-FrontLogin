<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript">

		function login() {
			var xhr = new XMLHttpRequest();
			var params = {
		      grant_type: "password",
		      client_id : "3MVG9HxRZv05HarRDCbMSbu0DqH.M_BA873rS54Uikz4KduKL01ag1GBMYK5UMf2.vflb4G3kmUSn244Iqdv0",
		      client_secret : "6655933965399586796",
		      username:"julenrcosta@dev.com",
		      password:"JrC&7012I4EdzNLjB4dpxbtek10V9baGL"};
			xhr.open("POST", 'https://julen-dev-ed.my.salesforce.com/services/oauth2/token?grant_type=password&client_id=3MVG9HxRZv05HarRDCbMSbu0DqH.M_BA873rS54Uikz4KduKL01ag1GBMYK5UMf2.vflb4G3kmUSn244Iqdv0&client_secret=6655933965399586796&username=julenrcosta@dev.com&password=JrC%267012I4EdzNLjB4dpxbtek10V9baGL', true);
			//xhr.open("POST", 'https://julen-dev-ed.my.salesforce.com/services/oauth2/token', true);

			//Send the proper header information along with the request
			xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

			xhr.onreadystatechange = function() { // Call a function when the state changes.
			    if (this.status === 200) {
			        console.log(this.response)
			        return this.response
			    }
			}
			xhr.send();
		}
		
		function apisetAccount() {
			var responseLogin = login();

			var http = new XMLHttpRequest()
			var params2 = {"Name":"Test"}
	        http.open('POST', 'https://julen-dev.my.salesforce.com/services/data/v49.0/sobjects/account/')
	        http.setRequestHeader('Content-type', 'application/json')
			http.setRequestHeader('Authorization', 'Bearer ' + responseLogin.access_token)
			http.setRequestHeader('Cross-Origin', 'true')
			//http2.setRequestHeader('Access-Control-Allow-Origin','*')
			//http2.setRequestHeader('Access-Control-Allow-Headers','*')
	        http.send(JSON.stringify(params2)) // Make sure to stringify
	        http2.onreadystatechange = function() {
	            // Do whatever with response
	            alert(http2.responseText)
	        }
		}


	</script>
</head>
<body>
	<button onclick="login()">TestCorsLogin</button>
	<button onclick="apisetAccount()">TestCors2</button>
</body>
</html>
